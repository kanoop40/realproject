# ChatApp Backend

‡∏£‡∏∞‡∏ö‡∏ö‡πÅ‡∏ä‡∏ó‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏°‡∏´‡∏≤‡∏ß‡∏¥‡∏ó‡∏¢‡∏≤‡∏•‡∏±‡∏¢ ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏ä‡∏ó‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤ ‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå ‡πÅ‡∏•‡∏∞‡∏ö‡∏∏‡∏Ñ‡∏•‡∏≤‡∏Å‡∏£

## ‚ú® Features

### üîê Authentication & Authorization
- ‡∏£‡∏∞‡∏ö‡∏ö‡∏•‡πá‡∏≠‡∏Å‡∏≠‡∏¥‡∏ô‡∏î‡πâ‡∏ß‡∏¢‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤/‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô
- JWT Authentication
- Role-based access control (student, teacher, staff, admin)

### üí¨ Chat System
- ‡πÅ‡∏ä‡∏ó‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡∏£‡∏∞‡∏´‡∏ß‡πà‡∏≤‡∏á 2 ‡∏Ñ‡∏ô
- ‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÅ‡∏ä‡∏ó‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏´‡∏•‡∏≤‡∏¢‡∏Ñ‡∏ô
- Real-time messaging ‡∏î‡πâ‡∏ß‡∏¢ Socket.IO
- ‡∏£‡∏∞‡∏ö‡∏ö‡∏≠‡πà‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß/‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡∏≠‡πà‡∏≤‡∏ô
- ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÑ‡∏î‡πâ
- ‡∏•‡∏ö‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏ä‡∏ó‡πÑ‡∏î‡πâ

### üë• Group Chat Features
- ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÑ‡∏î‡πâ (‡πÄ‡∏â‡∏û‡∏≤‡∏∞‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå/‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà)
- ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡∏Å‡∏•‡∏∏‡πà‡∏°
- ‡∏£‡∏∞‡∏ö‡∏ö‡πÄ‡∏ä‡∏¥‡∏ç‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥‡∏ï‡∏≤‡∏°:
  - ‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
  - ‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤
  - ‡∏Ñ‡∏ì‡∏∞/‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô
- ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏Å‡∏•‡∏∏‡πà‡∏° (‡πÄ‡∏û‡∏¥‡πà‡∏°/‡∏•‡∏ö)
- ‡πÅ‡∏™‡∏î‡∏á‡∏à‡∏≥‡∏ô‡∏ß‡∏ô‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å

### üìé File Sharing
- ‡∏™‡πà‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÑ‡∏î‡πâ‡πÑ‡∏°‡πà‡∏à‡∏≥‡∏Å‡∏±‡∏î‡πÄ‡∏ß‡∏•‡∏≤
- ‡∏£‡∏≠‡∏á‡∏£‡∏±‡∏ö PDF, Word, ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û
- ‡∏Ç‡∏ô‡∏≤‡∏î‡πÑ‡∏ü‡∏•‡πå‡∏™‡∏π‡∏á‡∏™‡∏∏‡∏î 50MB

### üë§ User Profile
- ‡πÅ‡∏™‡∏î‡∏á‡∏ä‡∏∑‡πà‡∏≠-‡∏ô‡∏≤‡∏°‡∏™‡∏Å‡∏∏‡∏•
- ‡∏´‡πâ‡∏≠‡∏á‡πÄ‡∏£‡∏µ‡∏¢‡∏ô
- ‡∏´‡∏ô‡πà‡∏ß‡∏¢‡∏á‡∏≤‡∏ô/‡∏Ñ‡∏ì‡∏∞
- ‡∏£‡∏´‡∏±‡∏™‡∏õ‡∏£‡∏∞‡∏à‡∏≥‡∏ï‡∏±‡∏ß
- ‡∏£‡∏π‡∏õ‡∏†‡∏≤‡∏û‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå

### üîî Notifications
- ‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ó‡∏±‡∏ô‡∏ó‡∏µ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö‡∏ó‡∏∏‡∏Å‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
- ‡πÑ‡∏°‡πà‡∏ï‡πâ‡∏≠‡∏á‡πÄ‡∏õ‡πá‡∏ô‡πÄ‡∏û‡∏∑‡πà‡∏≠‡∏ô‡∏Å‡πà‡∏≠‡∏ô
- Real-time notifications

### ÔøΩÔ∏è Data Management
- **Cascade Deletion**: ‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏•‡∏ö user ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡πÑ‡∏õ‡∏î‡πâ‡∏ß‡∏¢
  - ‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏µ‡πà user ‡∏™‡πà‡∏á
  - ‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà user ‡∏™‡∏£‡πâ‡∏≤‡∏á
  - ‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà user ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î
  - ‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á
  - ‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡πÉ‡∏ô‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ï‡πà‡∏≤‡∏á‡πÜ
- **System Cleanup**: ‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
- **Orphaned Data Cleanup**: ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÑ‡∏°‡πà‡∏°‡∏µ‡πÄ‡∏à‡πâ‡∏≤‡∏Ç‡∏≠‡∏á

### ÔøΩüîç Search System
- ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏î‡πâ
- ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÅ‡∏ä‡∏ó

## üõ† Tech Stack

- **Backend**: Node.js, Express.js
- **Database**: MongoDB with Mongoose
- **Real-time**: Socket.IO
- **Authentication**: JWT (JSON Web Tokens)
- **File Upload**: Multer
- **Security**: Helmet, CORS, Rate Limiting

## üöÄ Deployment on Render

### Prerequisites
1. ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏ö‡∏±‡∏ç‡∏ä‡∏µ [Render](https://render.com)
2. ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏° MongoDB Atlas database
3. ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏° GitHub repository

### Step 1: ‡πÄ‡∏ï‡∏£‡∏µ‡∏¢‡∏° Repository

1. **Push ‡πÇ‡∏õ‡∏£‡πÄ‡∏à‡∏Ñ‡∏Ç‡∏∂‡πâ‡∏ô GitHub:**
```bash
# ‡∏ñ‡πâ‡∏≤‡∏¢‡∏±‡∏á‡πÑ‡∏°‡πà‡πÑ‡∏î‡πâ init git
git init
git add .
git commit -m "Initial backend setup for Render deployment"

# ‡πÄ‡∏û‡∏¥‡πà‡∏° remote repository
git remote add origin https://github.com/your-username/chatapp-backend.git
git push -u origin main
```

### Step 2: ‡∏™‡∏£‡πâ‡∏≤‡∏á Web Service ‡∏ö‡∏ô Render

1. ‡πÄ‡∏Ç‡πâ‡∏≤ [Render Dashboard](https://dashboard.render.com)
2. ‡∏Ñ‡∏•‡∏¥‡∏Å **"New +"** ‚Üí **"Web Service"**
3. ‡πÄ‡∏•‡∏∑‡∏≠‡∏Å **"Build and deploy from a Git repository"**
4. ‡πÄ‡∏ä‡∏∑‡πà‡∏≠‡∏°‡∏ï‡πà‡∏≠ GitHub account ‡πÅ‡∏•‡∏∞‡πÄ‡∏•‡∏∑‡∏≠‡∏Å repository
5. ‡∏Å‡∏≥‡∏´‡∏ô‡∏î‡∏Ñ‡πà‡∏≤‡∏ï‡πà‡∏≠‡πÑ‡∏õ‡∏ô‡∏µ‡πâ:

**Basic Settings:**
- **Name**: `chatapp-backend` (‡∏´‡∏£‡∏∑‡∏≠‡∏ä‡∏∑‡πà‡∏≠‡∏ó‡∏µ‡πà‡∏ï‡πâ‡∏≠‡∏á‡∏Å‡∏≤‡∏£)
- **Environment**: `Node`
- **Region**: `Singapore` (‡πÉ‡∏Å‡∏•‡πâ‡∏õ‡∏£‡∏∞‡πÄ‡∏ó‡∏®‡πÑ‡∏ó‡∏¢‡∏ó‡∏µ‡πà‡∏™‡∏∏‡∏î)
- **Branch**: `main`
- **Root Directory**: ‡∏õ‡∏•‡πà‡∏≠‡∏¢‡∏ß‡πà‡∏≤‡∏á (‡∏ñ‡πâ‡∏≤‡πÑ‡∏ü‡∏•‡πå‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô root) ‡∏´‡∏£‡∏∑‡∏≠ `backend` (‡∏ñ‡πâ‡∏≤‡∏≠‡∏¢‡∏π‡πà‡πÉ‡∏ô‡πÇ‡∏ü‡∏•‡πÄ‡∏î‡∏≠‡∏£‡πå)

**Build & Deploy:**
- **Build Command**: `npm install`
- **Start Command**: `npm start`

### Step 3: Environment Variables

‡πÉ‡∏ô Render Dashboard ‚Üí Advanced ‚Üí **Environment Variables** ‡πÄ‡∏û‡∏¥‡πà‡∏°:

```bash
# ‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô (Required)
MONGO_URI=mongodb+srv://username:password@cluster.mongodb.net/chatapp?retryWrites=true&w=majority
JWT_SECRET=your-super-secret-jwt-key-make-it-very-long-and-complex-at-least-32-characters
NODE_ENV=production

# ‡πÑ‡∏°‡πà‡∏ö‡∏±‡∏á‡∏Ñ‡∏±‡∏ö (Optional - ‡∏°‡∏µ‡∏Ñ‡πà‡∏≤ default ‡πÅ‡∏•‡πâ‡∏ß)
PORT=5000
JWT_EXPIRE=30d
RATE_LIMIT_WINDOW_MS=900000
RATE_LIMIT_MAX=1000
MAX_FILE_SIZE_MB=50
FRONTEND_URL=https://your-frontend-app.com
ALLOWED_ORIGINS=https://your-frontend-app.com,http://localhost:19006
SOCKET_CORS_ORIGIN=https://your-frontend-app.com
```

### Step 4: Deploy

1. ‡∏Ñ‡∏•‡∏¥‡∏Å **"Create Web Service"**
2. Render ‡∏à‡∏∞ build ‡πÅ‡∏•‡∏∞ deploy ‡∏≠‡∏±‡∏ï‡πÇ‡∏ô‡∏°‡∏±‡∏ï‡∏¥
3. ‡∏£‡∏≠‡∏õ‡∏£‡∏∞‡∏°‡∏≤‡∏ì 5-10 ‡∏ô‡∏≤‡∏ó‡∏µ ‡∏à‡∏ô‡∏™‡∏ñ‡∏≤‡∏ô‡∏∞‡πÄ‡∏õ‡πá‡∏ô **"Live"**

### Step 5: ‡∏ó‡∏î‡∏™‡∏≠‡∏ö

‡πÄ‡∏°‡∏∑‡πà‡∏≠ deploy ‡∏™‡∏≥‡πÄ‡∏£‡πá‡∏à ‡∏à‡∏∞‡πÑ‡∏î‡πâ URL ‡πÄ‡∏ä‡πà‡∏ô: `https://chatapp-backend.onrender.com`

‡∏ó‡∏î‡∏™‡∏≠‡∏ö API:
```bash
# Health check
curl https://chatapp-backend.onrender.com/api/health

# API info  
curl https://chatapp-backend.onrender.com/
```

## üì¶ API Endpoints

### Authentication
- `POST /api/auth/register` - ‡∏™‡∏°‡∏±‡∏Ñ‡∏£‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å
- `POST /api/auth/login` - ‡πÄ‡∏Ç‡πâ‡∏≤‡∏™‡∏π‡πà‡∏£‡∏∞‡∏ö‡∏ö
- `GET /api/auth/me` - ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏õ‡∏±‡∏à‡∏à‡∏∏‡∏ö‡∏±‡∏ô

### Users
- `GET /api/users` - ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
- `GET /api/users/:id` - ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
- `PUT /api/users/profile` - ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå
- `POST /api/users/avatar` - ‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏£‡∏π‡∏õ‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå
- `DELETE /api/users/:id` - ‡∏•‡∏ö‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ (Admin ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô) üóëÔ∏è **Cascade Deletion**
- `POST /api/users/cleanup-orphaned-data` - ‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤ (Admin ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)

### Chats
- `GET /api/chats` - ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡πÅ‡∏ä‡∏ó
- `POST /api/chats` - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡πÅ‡∏ä‡∏ó‡πÉ‡∏´‡∏°‡πà
- `GET /api/chats/:id/messages` - ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÉ‡∏ô‡πÅ‡∏ä‡∏ó
- `POST /api/chats/:id/messages` - ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
- `DELETE /api/chats/messages/:id` - ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
- `DELETE /api/chats/:id` - ‡∏•‡∏ö‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏ä‡∏ó

### Groups
- `GET /api/groups` - ‡∏î‡∏π‡∏£‡∏≤‡∏¢‡∏Å‡∏≤‡∏£‡∏Å‡∏•‡∏∏‡πà‡∏°
- `POST /api/groups` - ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÉ‡∏´‡∏°‡πà
- `GET /api/groups/:id` - ‡∏î‡∏π‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏Å‡∏•‡∏∏‡πà‡∏°
- `POST /api/groups/:id/invite` - ‡πÄ‡∏ä‡∏¥‡∏ç‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å
- `DELETE /api/groups/:id/members/:userId` - ‡∏•‡∏ö‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å
- `DELETE /api/groups/:id` - ‡∏•‡∏ö‡∏Å‡∏•‡∏∏‡πà‡∏°

### Notifications
- `GET /api/notifications` - ‡∏î‡∏π‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô
- `PUT /api/notifications/:id/read` - ‡∏ó‡∏≥‡πÄ‡∏Ñ‡∏£‡∏∑‡πà‡∏≠‡∏á‡∏´‡∏°‡∏≤‡∏¢‡∏≠‡πà‡∏≤‡∏ô‡πÅ‡∏•‡πâ‡∏ß
- `DELETE /api/notifications/:id` - ‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô

## üîß Local Development

```bash
# Clone repository
git clone https://github.com/your-username/chatapp-backend.git
cd chatapp-backend

# Install dependencies
npm install

# Copy environment file
cp .env.example .env

# Edit .env with your values
# Start development server
npm run dev

# Create admin user
npm run create-admin

# Create test users
npm run create-test-users
```

## üìù User Roles

### üéì Student (‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤)
- ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡πâ‡∏ß‡∏¢‡∏£‡∏´‡∏±‡∏™‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤
- ‡πÅ‡∏ä‡∏ó‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß‡πÅ‡∏•‡∏∞‡∏Å‡∏•‡∏∏‡πà‡∏°
- ‡∏™‡πà‡∏á‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡πÅ‡∏•‡∏∞‡πÑ‡∏ü‡∏•‡πå
- ‡∏•‡∏ö‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏Ç‡∏≠‡∏á‡∏ï‡∏±‡∏ß‡πÄ‡∏≠‡∏á
- ‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç‡πÇ‡∏õ‡∏£‡πÑ‡∏ü‡∏•‡πå‡∏ï‡∏ô‡πÄ‡∏≠‡∏á
- ‡∏Ñ‡πâ‡∏ô‡∏´‡∏≤‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ‡∏≠‡∏∑‡πà‡∏ô

### üë®‚Äçüè´ Teacher (‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå)
- ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡πâ‡∏ß‡∏¢‡∏£‡∏´‡∏±‡∏™‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô
- ‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏ô‡∏±‡∏Å‡∏®‡∏∂‡∏Å‡∏©‡∏≤
- **‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°**: ‡∏™‡∏£‡πâ‡∏≤‡∏á‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÑ‡∏î‡πâ
- **‡πÄ‡∏û‡∏¥‡πà‡∏°‡πÄ‡∏ï‡∏¥‡∏°**: ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ Auto Invite ‡πÑ‡∏î‡πâ

### üë• Staff (‡πÄ‡∏à‡πâ‡∏≤‡∏´‡∏ô‡πâ‡∏≤‡∏ó‡∏µ‡πà/‡∏ö‡∏∏‡∏Ñ‡∏•‡∏≤‡∏Å‡∏£)
- ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡∏∞‡∏ö‡∏ö‡∏î‡πâ‡∏ß‡∏¢‡∏£‡∏´‡∏±‡∏™‡∏û‡∏ô‡∏±‡∏Å‡∏á‡∏≤‡∏ô
- ‡∏ó‡∏∏‡∏Å‡∏≠‡∏¢‡πà‡∏≤‡∏á‡πÄ‡∏´‡∏°‡∏∑‡∏≠‡∏ô‡∏≠‡∏≤‡∏à‡∏≤‡∏£‡∏¢‡πå

### üîß Admin (‡∏ú‡∏π‡πâ‡∏î‡∏π‡πÅ‡∏•‡∏£‡∏∞‡∏ö‡∏ö)
- ‡∏™‡∏£‡πâ‡∏≤‡∏á/‡πÅ‡∏Å‡πâ‡πÑ‡∏Ç/‡∏•‡∏ö‡∏ö‡∏±‡∏ç‡∏ä‡∏µ‡∏ú‡∏π‡πâ‡πÉ‡∏ä‡πâ
- ‡∏à‡∏±‡∏î‡∏Å‡∏≤‡∏£‡∏£‡∏∞‡∏ö‡∏ö‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î
- ‡∏™‡πà‡∏á‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏£‡∏∞‡∏ö‡∏ö

## üîí Security Features

- **Helmet**: ‡∏õ‡πâ‡∏≠‡∏á‡∏Å‡∏±‡∏ô security vulnerabilities
- **Rate Limiting**: ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏à‡∏≥‡∏ô‡∏ß‡∏ô requests
- **CORS**: ‡∏Ñ‡∏ß‡∏ö‡∏Ñ‡∏∏‡∏°‡∏Å‡∏≤‡∏£‡πÄ‡∏Ç‡πâ‡∏≤‡∏ñ‡∏∂‡∏á‡∏à‡∏≤‡∏Å domain ‡∏≠‡∏∑‡πà‡∏ô
- **JWT**: Authentication ‡∏ó‡∏µ‡πà‡∏õ‡∏•‡∏≠‡∏î‡∏†‡∏±‡∏¢
- **Input Validation**: ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏µ‡πà‡πÄ‡∏Ç‡πâ‡∏≤‡∏°‡∏≤
- **File Upload Security**: ‡∏à‡∏≥‡∏Å‡∏±‡∏î‡∏õ‡∏£‡∏∞‡πÄ‡∏†‡∏ó‡πÅ‡∏•‡∏∞‡∏Ç‡∏ô‡∏≤‡∏î‡πÑ‡∏ü‡∏•‡πå

## üîß Scripts

```bash
# Development
npm run dev          # ‡∏£‡∏±‡∏ô server ‡πÉ‡∏ô development mode

# Production  
npm start           # ‡∏£‡∏±‡∏ô server ‡πÉ‡∏ô production mode

# Database Management
npm run create-admin      # ‡∏™‡∏£‡πâ‡∏≤‡∏á admin user
npm run create-test-users # ‡∏™‡∏£‡πâ‡∏≤‡∏á test users
npm run reset-admin       # ‡∏£‡∏µ‡πÄ‡∏ã‡πá‡∏ï admin password
```

## üö® Important Notes ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö Render

### 1. Database Setup
- ‡πÉ‡∏ä‡πâ **MongoDB Atlas** (‡∏ü‡∏£‡∏µ 512MB)
- **‡∏≠‡∏¢‡πà‡∏≤‡πÉ‡∏ä‡πâ** local MongoDB
- ‡∏ï‡∏±‡πâ‡∏á‡∏Ñ‡πà‡∏≤ IP Whitelist ‡πÄ‡∏õ‡πá‡∏ô `0.0.0.0/0` ‡πÉ‡∏ô MongoDB Atlas

### 2. Environment Variables
- `MONGO_URI` **‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô** - MongoDB connection string
- `JWT_SECRET` **‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô** - ‡∏ï‡πâ‡∏≠‡∏á‡∏¢‡∏≤‡∏ß‡∏°‡∏≤‡∏Å‡∏Å‡∏ß‡πà‡∏≤ 32 ‡∏ï‡∏±‡∏ß‡∏≠‡∏±‡∏Å‡∏©‡∏£
- `NODE_ENV=production` **‡∏à‡∏≥‡πÄ‡∏õ‡πá‡∏ô**

### 3. File Storage
- ‡πÑ‡∏ü‡∏•‡πå‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î‡∏à‡∏∞‡∏´‡∏≤‡∏¢‡∏´‡∏•‡∏±‡∏á deploy ‡πÉ‡∏´‡∏°‡πà
- ‡∏Ñ‡∏ß‡∏£‡πÉ‡∏ä‡πâ cloud storage ‡πÄ‡∏ä‡πà‡∏ô AWS S3, Cloudinary

### 4. Performance
- Render free tier ‡∏à‡∏∞ sleep ‡∏´‡∏•‡∏±‡∏á 15 ‡∏ô‡∏≤‡∏ó‡∏µ‡πÑ‡∏°‡πà‡πÉ‡∏ä‡πâ‡∏á‡∏≤‡∏ô
- Cold start ‡πÉ‡∏ä‡πâ‡πÄ‡∏ß‡∏•‡∏≤ 30-60 ‡∏ß‡∏¥‡∏ô‡∏≤‡∏ó‡∏µ
- ‡∏Ñ‡∏ß‡∏£ upgrade ‡πÄ‡∏õ‡πá‡∏ô paid plan ‡∏™‡∏≥‡∏´‡∏£‡∏±‡∏ö production

## ÔøΩÔ∏è Maintenance Scripts

### ‡∏Å‡∏≤‡∏£‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏Å‡∏≤‡∏£‡∏•‡∏ö User
```bash
# ‡∏ó‡∏î‡∏™‡∏≠‡∏ö‡∏ß‡πà‡∏≤‡∏ñ‡πâ‡∏≤‡∏•‡∏ö user ‡∏à‡∏∞‡∏°‡∏µ‡∏ú‡∏•‡∏Å‡∏£‡∏∞‡∏ó‡∏ö‡∏≠‡∏∞‡πÑ‡∏£‡∏ö‡πâ‡∏≤‡∏á (‡πÑ‡∏°‡πà‡∏•‡∏ö‡∏à‡∏£‡∏¥‡∏á)
node scripts/test-user-deletion.js user@example.com
```

### ‡∏Å‡∏≤‡∏£‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•
```bash
# ‡∏ó‡∏≥‡∏Ñ‡∏ß‡∏≤‡∏°‡∏™‡∏∞‡∏≠‡∏≤‡∏î‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡πÄ‡∏Å‡πà‡∏≤‡∏ó‡∏µ‡πà‡πÄ‡∏´‡∏•‡∏∑‡∏≠‡∏Ñ‡πâ‡∏≤‡∏á‡πÉ‡∏ô‡∏£‡∏∞‡∏ö‡∏ö
node scripts/cleanup-orphaned-data.js

# ‡∏´‡∏£‡∏∑‡∏≠‡πÄ‡∏£‡∏µ‡∏¢‡∏Å‡∏ú‡πà‡∏≤‡∏ô API (Admin ‡πÄ‡∏ó‡πà‡∏≤‡∏ô‡∏±‡πâ‡∏ô)
curl -X POST http://localhost:5000/api/users/cleanup-orphaned-data \
  -H "Authorization: Bearer YOUR_ADMIN_TOKEN"
```

### ‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á Admin
```bash
# ‡∏™‡∏£‡πâ‡∏≤‡∏á admin user
node scripts/createAdmin.js
```

### ‡∏Å‡∏≤‡∏£‡∏™‡∏£‡πâ‡∏≤‡∏á Test Users
```bash
# ‡∏™‡∏£‡πâ‡∏≤‡∏á test users
node scripts/createTestUsers.js
```

## üóëÔ∏è User Deletion (Cascade)

‡πÄ‡∏°‡∏∑‡πà‡∏≠‡∏•‡∏ö user ‡∏Ç‡πâ‡∏≠‡∏°‡∏π‡∏•‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏à‡∏∞‡∏ñ‡∏π‡∏Å‡∏•‡∏ö‡πÑ‡∏õ‡∏î‡πâ‡∏ß‡∏¢:

1. **‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏ó‡∏µ‡πà user ‡∏™‡πà‡∏á** - ‡∏•‡∏ö‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏ó‡∏∏‡∏Å‡πÅ‡∏ä‡∏ó/‡∏Å‡∏•‡∏∏‡πà‡∏°
2. **‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà user ‡∏™‡∏£‡πâ‡∏≤‡∏á** - ‡∏•‡∏ö‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏±‡πâ‡∏á‡∏´‡∏°‡∏î‡∏û‡∏£‡πâ‡∏≠‡∏°‡∏Ç‡πâ‡∏≠‡∏Ñ‡∏ß‡∏≤‡∏°
3. **‡∏£‡∏π‡∏õ‡∏Å‡∏•‡∏∏‡πà‡∏°‡πÅ‡∏•‡∏∞ avatar** - ‡∏•‡∏ö‡πÑ‡∏ü‡∏•‡πå‡∏à‡∏≤‡∏Å‡∏£‡∏∞‡∏ö‡∏ö‡πÑ‡∏ü‡∏•‡πå
4. **‡∏Å‡∏≤‡∏£‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å‡∏Å‡∏•‡∏∏‡πà‡∏°** - ‡∏ñ‡∏≠‡∏ô user ‡∏≠‡∏≠‡∏Å‡∏à‡∏≤‡∏Å‡∏Å‡∏•‡∏∏‡πà‡∏°‡∏ó‡∏µ‡πà‡πÄ‡∏õ‡πá‡∏ô‡∏™‡∏°‡∏≤‡∏ä‡∏¥‡∏Å
5. **‡∏´‡πâ‡∏≠‡∏á‡πÅ‡∏ä‡∏ó‡∏™‡πà‡∏ß‡∏ô‡∏ï‡∏±‡∏ß** - ‡∏•‡∏ö‡∏´‡πâ‡∏≠‡∏á‡∏ó‡∏µ‡πà user ‡πÄ‡∏õ‡πá‡∏ô‡∏ú‡∏π‡πâ‡πÄ‡∏Ç‡πâ‡∏≤‡∏£‡πà‡∏ß‡∏°
6. **‡πÑ‡∏ü‡∏•‡πå‡∏ó‡∏µ‡πà‡∏≠‡∏±‡∏õ‡πÇ‡∏´‡∏•‡∏î** - ‡∏•‡∏ö‡∏ó‡∏±‡πâ‡∏á‡πÑ‡∏ü‡∏•‡πå‡πÅ‡∏•‡∏∞ records
7. **‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô** - ‡∏•‡∏ö‡∏Å‡∏≤‡∏£‡πÅ‡∏à‡πâ‡∏á‡πÄ‡∏ï‡∏∑‡∏≠‡∏ô‡∏ó‡∏µ‡πà‡πÄ‡∏Å‡∏µ‡πà‡∏¢‡∏ß‡∏Ç‡πâ‡∏≠‡∏á

**‚ö†Ô∏è ‡∏Å‡∏≤‡∏£‡∏•‡∏ö‡∏ô‡∏µ‡πâ‡πÑ‡∏°‡πà‡∏™‡∏≤‡∏°‡∏≤‡∏£‡∏ñ‡∏¢‡πâ‡∏≠‡∏ô‡∏Å‡∏•‡∏±‡∏ö‡πÑ‡∏î‡πâ ‡∏Å‡∏£‡∏∏‡∏ì‡∏≤‡πÉ‡∏ä‡πâ test script ‡∏Å‡πà‡∏≠‡∏ô**

## ÔøΩüêõ Troubleshooting

### 1. Build Failed
```bash
# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö package.json
# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö Node.js version compatibility
# ‡∏î‡∏π build logs ‡πÉ‡∏ô Render Dashboard
```

### 2. Database Connection Error
```bash
# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö MONGO_URI format
# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö MongoDB Atlas IP whitelist
# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö username/password
```

### 3. CORS Error
```bash
# ‡πÄ‡∏û‡∏¥‡πà‡∏° frontend URL ‡πÉ‡∏ô ALLOWED_ORIGINS
# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö protocol (http vs https)
```

### 4. Environment Variables
```bash
# ‡∏ï‡∏£‡∏ß‡∏à‡∏™‡∏≠‡∏ö‡πÉ‡∏ô Render Dashboard ‚Üí Environment Variables
# ‡∏´‡πâ‡∏≤‡∏°‡∏°‡∏µ space ‡∏´‡∏£‡∏∑‡∏≠ quotes ‡πÄ‡∏Å‡∏¥‡∏ô
# Redeploy ‡∏´‡∏•‡∏±‡∏á‡∏à‡∏≤‡∏Å‡πÄ‡∏õ‡∏•‡∏µ‡πà‡∏¢‡∏ô env vars
```

